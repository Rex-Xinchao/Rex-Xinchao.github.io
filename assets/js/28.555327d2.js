(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{390:function(t,s,e){"use strict";e.r(s);var a=e(42),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("说明")]),t._v(" "),e("p",[t._v("使用的服务器镜像为 Ubuntu 18.04 server 64bit "),e("br"),t._v("\n所有安装的服务都是通过 docker 镜像化")])]),t._v(" "),e("h3",{attrs:{id:"安装-docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-docker"}},[t._v("#")]),t._v(" 安装 docker")]),t._v(" "),e("ul",[e("li",[t._v("安装方法一：运行官方安装脚本")])]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -fsSL https://get.docker.com "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" -s docker --mirror Aliyun\n")])])]),e("ul",[e("li",[t._v("安装方法二：手动安装：")])]),t._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("##更新apt索引")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" update\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("##安装apt依赖包，允许apt通过https使用存储库")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    apt-transport-https "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    ca-certificates "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    gnupg-agent "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    software-properties-common\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("##添加docker秘钥")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -fsSL https://download.docker.com/linux/ubuntu/gpg "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" apt-key "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" -\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("##验证密钥（非必要）")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" apt-key fingerprint 0EBFCD88\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("##设置稳定版仓库")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" add-apt-repository "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n   "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"deb [arch=amd64] https://download.docker.com/linux/ubuntu \\\n   '),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),t._v("lsb_release -cs"),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v(' \\\n   stable"')]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("##再次更新apt索引")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" update\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("##安装docker")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" docker docker-ce 或者 "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" docker docker-compose\n")])])]),e("h3",{attrs:{id:"docker-命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-命令"}},[t._v("#")]),t._v(" docker 命令")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("获取镜像 --\x3e docker pull [镜像名称]:[镜像版本号] * 镜像名称不能带大写字母")])]),t._v(" "),e("li",[e("p",[t._v("列出镜像 --\x3e docker images / docler images ls")])]),t._v(" "),e("li",[e("p",[t._v("删除镜像 --\x3e docker rm [镜像 id]")])]),t._v(" "),e("li",[e("p",[t._v("构建镜像 --\x3e docker image build [目标目录路径] -t [镜像名称]:[镜像版本号]")])]),t._v(" "),e("li",[e("p",[t._v("创建容器 --\x3e docker container create [容器名称]:[容器版本号]")])]),t._v(" "),e("li",[e("p",[t._v("列出容器 --\x3e docker container ls -a / docker ps -a")])]),t._v(" "),e("li",[e("p",[t._v("停止容器 --\x3e docker container stop [容器 id]")])]),t._v(" "),e("li",[e("p",[t._v("启动容器 --\x3e docker conatiner start [容器 id]")])]),t._v(" "),e("li",[e("p",[t._v("获取容器输出信息 --\x3e docker container logs [容器 id]")])]),t._v(" "),e("li",[e("p",[t._v("进入容器 --\x3e docker exec [容器 id]")])]),t._v(" "),e("li",[e("p",[t._v("批量删除镜像 --\x3e docker rmi `docker images -q`")])]),t._v(" "),e("li",[e("p",[t._v('按条件(名称中包换 demo)批量删除镜像 --\x3e docker rmi `docker images -f "reference=demo" -q`')])]),t._v(" "),e("li",[e("p",[t._v("批量停止容器 --\x3e docker container stop `docker ps -a -q`")])]),t._v(" "),e("li",[e("p",[t._v("批量删除容器 --\x3e docker container rm `docker ps -a -q`")])]),t._v(" "),e("li",[e("p",[t._v('按条件(名称中包换 demo)批量删除容器 --\x3e docker container rm `docker ps -f "name=demo" -a -q`')])])]),t._v(" "),e("h3",{attrs:{id:"dockerfile-指令详解"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile-指令详解"}},[t._v("#")]),t._v(" dockerfile 指令详解")]),t._v(" "),e("ul",[e("li",[t._v("COPY --\x3e COPY [源路径][目标路径]\n"),e("blockquote",[e("ul",[e("li",[t._v("将源路径下的文件/目录下的文件复制到目标路径")])])])]),t._v(" "),e("li",[t._v("ADD --\x3e ADD [源路径][目标路径]\n"),e("blockquote",[e("ul",[e("li",[t._v("源路径为 url 链接 --\x3e 下载链接的文件并放入目标路径")]),t._v(" "),e("li",[t._v("源路径为 tar 压缩文件 --\x3e 自动解压并放入目标路径")])])])]),t._v(" "),e("li",[t._v('CMD --\x3e CMD <命令> / CMD ["可执行文件", "参数 1", "参数 2"...]')]),t._v(" "),e("li",[t._v("ENV --\x3e ENV <key>=<value> <key2>=<value2>")]),t._v(" "),e("li",[t._v("EXPOSE --\x3e EXPOSE <端口 1> (这只是一个申明，并不会实际开启端口服务)")])])])}),[],!1,null,null,null);s.default=n.exports}}]);